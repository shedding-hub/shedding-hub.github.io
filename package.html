---
layout: default
title: Python Package - Shedding Hub
---

<section class="hero is-light">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <h1 class="title is-size-1 mb-4">Python Package</h1>
      <p class="subtitle is-size-4">
        Access and analyze Shedding Hub data programmatically
      </p>
    </div>
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <div class="content">
      <p class="is-size-5">
        The <code>shedding-hub</code> Python package provides tools for loading datasets,
        performing statistical analyses, and creating visualizations. Available on PyPI,
        it enables reproducible research and seamless integration with your analysis workflows.
      </p>
    </div>
  </div>
</section>

<!-- Installation Section -->
<section class="section">
  <div class="container is-max-desktop">
    <h2 class="title is-3">Installation</h2>
    <div class="content">
      <p>Install the package using pip:</p>
      <pre><code>pip install shedding-hub</code></pre>

      <p>For the latest development version from GitHub:</p>
      <pre><code>pip install git+https://github.com/shedding-hub/shedding-hub.git</code></pre>
    </div>
  </div>
</section>

<!-- Quick Start Section -->
<section class="section has-background-light">
  <div class="container is-max-desktop">
    <h2 class="title is-3">Quick Start</h2>
    <div class="content">
      <h3>Load a Dataset</h3>
      <pre><code>import shedding_hub as sh

# Load a specific dataset by identifier
data = sh.load_dataset('woelfel2020virological')

# Access dataset structure
print(data['title'])
print(data['analytes'].keys())
print(f"Number of participants: {len(data['participants'])}")</code></pre>

      <h3>Calculate Summary Statistics</h3>
      <pre><code># Per-participant shedding summary
summary = sh.calc_shedding_summary(data, specimen='sputum')
print(summary[['participant_id', 'shedding_duration', 'peak_value', 'clearance_status']])

# Detection rate over time
detection = sh.calc_detection_summary(data, specimen='sputum', time_bin_size=7)
print(detection[['time', 'n_tested', 'proportion', 'ci_lower', 'ci_upper']])

# Basic dataset metadata
info = sh.calc_dataset_summary(data)
print(f"Biomarkers: {info['biomarkers']}")
print(f"Specimens: {info['specimens']}")</code></pre>

      <h3>Create Visualizations</h3>
      <pre><code># Plot individual shedding trajectories
fig = sh.plot_time_course(data, specimen='sputum')

# Heatmap of shedding patterns
fig = sh.plot_shedding_heatmap(data, specimen='sputum', value='concentration')

# Aggregate trajectory with uncertainty bands
fig = sh.plot_mean_trajectory(data, specimen='sputum', value='concentration')

# Kaplan-Meier clearance curve
fig = sh.plot_clearance_curve(data, specimen='sputum')</code></pre>
    </div>
  </div>
</section>

<!-- Function Reference Section -->
<section class="section">
  <div class="container is-max-desktop">
    <h2 class="title is-3">Function Reference</h2>
    <div class="content">
      <div class="columns">
        <div class="column is-6">
          <h4><span class="icon has-text-primary"><i class="fa-solid fa-download"></i></span> Data Loading</h4>
          <ul>
            <li><code>load_dataset(dataset, ref=None, pr=None, local=None)</code> - Load a dataset from GitHub or local directory</li>
          </ul>

          <h4><span class="icon has-text-primary"><i class="fa-solid fa-calculator"></i></span> Statistics</h4>
          <ul>
            <li><code>calc_shedding_summary(dataset)</code> - Per-participant summary (duration, peak, clearance)</li>
            <li><code>calc_detection_summary(dataset)</code> - Detection rate by time bin with Wilson CI</li>
            <li><code>calc_clearance_summary(dataset)</code> - Kaplan-Meier clearance statistics</li>
            <li><code>calc_value_summary(dataset)</code> - Value distribution by time bin</li>
            <li><code>calc_dataset_summary(dataset)</code> - Basic dataset metadata</li>
            <li><code>compare_datasets(datasets)</code> - Cross-study comparison table</li>
          </ul>

          <h4><span class="icon has-text-primary"><i class="fa-solid fa-clock"></i></span> Shedding Duration</h4>
          <ul>
            <li><code>calc_shedding_duration(dataset)</code> - Calculate duration statistics</li>
            <li><code>calc_shedding_durations(dataset_ids)</code> - Batch calculate across studies</li>
            <li><code>plot_shedding_duration(df)</code> - Plot individual durations</li>
            <li><code>plot_shedding_durations(df)</code> - Compare durations across studies</li>
          </ul>
        </div>
        <div class="column is-6">
          <h4><span class="icon has-text-primary"><i class="fa-solid fa-chart-bar"></i></span> Visualization</h4>
          <ul>
            <li><code>plot_time_course(dataset)</code> - Individual shedding trajectories</li>
            <li><code>plot_time_courses(datasets)</code> - Compare trajectories across studies</li>
            <li><code>plot_shedding_heatmap(dataset)</code> - Heatmap of shedding patterns</li>
            <li><code>plot_mean_trajectory(dataset)</code> - Aggregate trajectory with uncertainty</li>
            <li><code>plot_value_distribution_by_time(dataset)</code> - Box/violin plots by time</li>
            <li><code>plot_detection_probability(dataset)</code> - Detection rate over time</li>
            <li><code>plot_clearance_curve(dataset)</code> - Kaplan-Meier survival curve</li>
          </ul>

          <h4><span class="icon has-text-primary"><i class="fa-solid fa-arrow-up"></i></span> Shedding Peak</h4>
          <ul>
            <li><code>calc_shedding_peak(dataset)</code> - Calculate peak statistics</li>
            <li><code>calc_shedding_peaks(dataset_ids)</code> - Batch calculate across studies</li>
            <li><code>plot_shedding_peak(df)</code> - Plot peak values</li>
            <li><code>plot_shedding_peaks(df)</code> - Compare peaks across studies</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Common Parameters Section -->
<section class="section has-background-light">
  <div class="container is-max-desktop">
    <h2 class="title is-3">Common Parameters</h2>
    <div class="content">
      <p>Most functions accept these filtering parameters:</p>
      <table class="table is-striped is-fullwidth">
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>biomarker</code></td>
            <td>Filter by specific biomarker</td>
            <td><code>biomarker='SARS-CoV-2'</code></td>
          </tr>
          <tr>
            <td><code>specimen</code></td>
            <td>Filter by specimen type</td>
            <td><code>specimen='sputum'</code></td>
          </tr>
          <tr>
            <td><code>value</code></td>
            <td>Filter by value type</td>
            <td><code>value='concentration'</code> or <code>value='ct'</code></td>
          </tr>
          <tr>
            <td><code>time_bin_size</code></td>
            <td>Size of time bins in days</td>
            <td><code>time_bin_size=7</code></td>
          </tr>
          <tr>
            <td><code>time_range</code></td>
            <td>Limit time range</td>
            <td><code>time_range=(0, 30)</code></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- Resources Section -->
<section class="section">
  <div class="container is-max-desktop">
    <h2 class="title is-3">Resources</h2>
    <div class="columns">
      <div class="column">
        <div class="card">
          <div class="card-content">
            <h3 class="title is-5">
              <span class="icon-text">
                <span class="icon has-text-primary">
                  <i class="fab fa-python"></i>
                </span>
                <span>PyPI</span>
              </span>
            </h3>
            <p>View package information, version history, and installation statistics.</p>
            <a href="https://pypi.org/project/shedding-hub/" class="button is-primary mt-3" target="_blank" rel="noopener">
              <span class="icon">
                <i class="fa-solid fa-external-link-alt"></i>
              </span>
              <span>Visit PyPI</span>
            </a>
          </div>
        </div>
      </div>
      <div class="column">
        <div class="card">
          <div class="card-content">
            <h3 class="title is-5">
              <span class="icon-text">
                <span class="icon has-text-primary">
                  <i class="fab fa-github"></i>
                </span>
                <span>GitHub</span>
              </span>
            </h3>
            <p>Source code, issue tracking, and contribution guidelines.</p>
            <a href="https://github.com/shedding-hub/shedding-hub" class="button is-link mt-3" target="_blank" rel="noopener">
              <span class="icon">
                <i class="fa-solid fa-external-link-alt"></i>
              </span>
              <span>View on GitHub</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Examples Section -->
<section class="section has-background-light">
  <div class="container is-max-desktop">
    <h2 class="title is-3">Example Workflows</h2>
    <div class="content">
      <h4>Compare Shedding Across Multiple Studies</h4>
      <pre><code>import shedding_hub as sh

# Load multiple datasets
data1 = sh.load_dataset('woelfel2020virological')
data2 = sh.load_dataset('kim2020viral')
data3 = sh.load_dataset('young2020epidemiologic')

# Compare key statistics across studies
comparison = sh.compare_datasets(
    [data1, data2, data3],
    specimen='sputum',
    value='concentration'
)
print(comparison[['dataset_id', 'n_participants', 'median_shedding_duration',
                  'median_peak_value', 'pct_cleared']])</code></pre>

      <h4>Analyze Clearance Patterns</h4>
      <pre><code>import shedding_hub as sh

# Load dataset
data = sh.load_dataset('woelfel2020virological')

# Get Kaplan-Meier clearance statistics
clearance = sh.calc_clearance_summary(data, specimen='sputum')
print(f"Median clearance time: {clearance['median_clearance_time']} days")
print(f"Clearance rate: {clearance['clearance_rate']*100:.1f}%")

# Plot the survival curve
fig = sh.plot_clearance_curve(data, specimen='sputum', show_ci=True)</code></pre>

      <h4>Visualize Population-Level Shedding</h4>
      <pre><code>import shedding_hub as sh
import matplotlib.pyplot as plt

# Load dataset
data = sh.load_dataset('woelfel2020virological')

# Create a multi-panel figure
fig, axes = plt.subplots(2, 2, figsize=(12, 10))

# Heatmap of individual trajectories
plt.sca(axes[0, 0])
sh.plot_shedding_heatmap(data, specimen='sputum', value='concentration')

# Mean trajectory with 95% CI
plt.sca(axes[0, 1])
sh.plot_mean_trajectory(data, specimen='sputum', value='concentration')

# Detection probability over time
plt.sca(axes[1, 0])
sh.plot_detection_probability(data, specimen='sputum')

# Clearance curve
plt.sca(axes[1, 1])
sh.plot_clearance_curve(data, specimen='sputum')

plt.tight_layout()
plt.savefig('shedding_analysis.png', dpi=300)</code></pre>
    </div>
  </div>
</section>

<!-- Contributing Section -->
<section class="section">
  <div class="container is-max-desktop">
    <h2 class="title is-3">Contributing</h2>
    <div class="content">
      <p>
        We welcome contributions to the shedding-hub package! Whether you're fixing bugs,
        adding new features, improving documentation, or suggesting enhancements, your help is appreciated.
      </p>
      <p>
        Please visit our <a href="https://github.com/shedding-hub/shedding-hub/blob/main/CONTRIBUTING.md" target="_blank">Contributing Guidelines</a>
        to get started. For major changes, please open an issue first to discuss what you would like to change.
      </p>
      <div class="buttons">
        <a href="https://github.com/shedding-hub/shedding-hub/issues" class="button is-primary" target="_blank" rel="noopener">
          <span class="icon">
            <i class="fa-solid fa-bug"></i>
          </span>
          <span>Report an Issue</span>
        </a>
        <a href="https://github.com/shedding-hub/shedding-hub/pulls" class="button is-link" target="_blank" rel="noopener">
          <span class="icon">
            <i class="fa-solid fa-code-pull-request"></i>
          </span>
          <span>Submit a Pull Request</span>
        </a>
      </div>
    </div>
  </div>
</section>
